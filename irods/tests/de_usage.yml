---
- name: Test customize for DE
  hosts: irods_catalog
  become: true
  become_user: irods
  run_once: true
  tasks:
    - name: Retrieve DE job user information
      ansible.builtin.command: iadmin lu de_job
      register: user_info
      changed_when: false

    - name: Verify user information
      ansible.builtin.assert:
        that: user_info.stdout == 'No rows found'

    - name: Register /testing/jobs info
      ansible.builtin.command: iquest "select COLL_ID where COLL_NAME = '/testing/jobs'"
      changed_when: false
      register: coll_info

    - name: Verify /test/job does not exist
      ansible.builtin.assert:
        that: coll_info.stdout is search('CAT_NO_ROWS_FOUND')
